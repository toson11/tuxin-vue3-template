- 是否考虑不干扰用户正在操作的情况？比如监听一段时间用户鼠标是否移动、键盘是否输入
- 什么时候检查升级情况？
  - 登录后？
  - 跳转路由时？
  - 刷新页面时？
  - 定时轮询？

# 升级公告

1. 开启后台升级配置
2. 后台提前发送短信给用户
3. 每次打开页面都请求后台升级配置，如在`App.vue`中请求

# 升级完成通知/部署通知

适用场景：升级后，用户还停留在旧页面没有刷新页面的情况。

### 基于index.html的Etag对比

index.html的etag变化时，证明内容已更新，轮询请求html获取其etag进行对比即可

### 使用第三方库

[version-rocket](https://github.com/guMcrey/version-rocket.git)

### 升级完成网页弹框提示实现原理

- 使用`Web Worker API`来做轮询，不影响渲染进程。
- 每次轮询请求获取通过每次构建通过生成/修改`dist`目录中的版本文件，给文件路径加上`?{Date.now}`强制获取最新文件，从而实现版本控制

### 部署完成发送飞书/企业微信通知实现原理

通过node脚本发送请求，请求飞书群发机器人的链接
给build脚本加上执行node脚本的命令即可，如`vite build && node send.js
